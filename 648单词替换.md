# **replace-words**
**ğŸ”— é¢˜ç›®é“¾æ¥ï¼š**  
**[replace-words](https://leetcode.cn/problems/replace-words/)**
---

## **è§£é¢˜ä»£ç ï¼ˆC++ï¼‰**

```cpp
class Trie {
public:
    Trie* next[26];
    bool isEnd;

    Trie() {
        for(int i = 0; i < 26; i++) {
            next[i] = nullptr;
        }
        isEnd = false;
    }

    void insert(const string &word) {
        Trie* node = this;
        for(char c : word) {
            int idx = c - 'a';
            if(node->next[idx] == nullptr) {
                node->next[idx] = new Trie();
            }
            node = node->next[idx];
        }
        node->isEnd = true;
    }

    // æŸ¥æ‰¾å•è¯çš„æœ€çŸ­å‰ç¼€ï¼Œå¦‚æœæ²¡æœ‰è¿”å›ç©ºå­—ç¬¦ä¸²
    string searchPrefix(const string &word) {
        Trie* node = this;
        string prefix = "";
        for(char c : word) {
            int idx = c - 'a';
            if(node->next[idx] == nullptr) break;
            prefix += c;
            node = node->next[idx];
            if(node->isEnd) return prefix;
        }
        return "";
    }
};

class Solution {
public:
    string replaceWords(vector<string>& dictionary, string sentence) {
        Trie* root = new Trie();
        for(const string &word : dictionary) {
            root->insert(word);
        }

        string result = "";
        string word = "";
        sentence += " "; // æ–¹ä¾¿å¤„ç†æœ€åä¸€ä¸ªå•è¯
        for(char c : sentence) {
            if(c == ' ') {
                if(!word.empty()) {
                    string prefix = root->searchPrefix(word);
                    if(!prefix.empty()) {
                        result += prefix;
                    } else {
                        result += word;
                    }
                    result += " ";
                    word = "";
                }
            } else {
                word += c;
            }
        }

        if(!result.empty() && result.back() == ' ')
            result.pop_back(); // å»æ‰æœ€åä¸€ä¸ªç©ºæ ¼

        return result;
    }
};

è§£é¢˜æ€è·¯ï¼š
æœ¬è´¨å°±æ˜¯åœ¨æ‰¾æœ€çŸ­å‰ç¼€ï¼Œå¦‚æœé‡‡ç”¨æš´åŠ›çš„æ–¹æ³•ï¼Œä¼šæå¤§çš„æµªè´¹æ—¶é—´ï¼Œè¿™é“é¢˜ç›®åœ¨é‡‡ç”¨å­—å…¸æ ‘çš„æ—¶å€™ï¼Œç°åœ¨scentenceåé¢åŠ äº†ä¸ª" "è¿™æ˜¯ä¸ºäº†æœ€åä¸€ä¸ªå•è¯è€Œåšçš„ã€‚wordè®°å½•äº†æ¯ä¸ªéœ€è¦ç¼©å‡çš„å•è¯ã€‚
ç©ºæ ¼ç¬¦æ˜¯æé†’ç¨‹åºä¸€ä¸ªå•è¯å·²ç»æ”¶é›†å®Œæ¯•äº†ï¼Œå‡†å¤‡è¿›å…¥ä¸‹ä¸€ä¸ªå•è¯äº†ã€‚
