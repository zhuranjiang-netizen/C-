# **problems/stone-game-ii**
**ğŸ”— é¢˜ç›®é“¾æ¥ï¼š**  
**[problems/stone-game-ii](https://leetcode.cn/problems/stone-game-ii/)**
---
## **è§£é¢˜ä»£ç ï¼ˆC++ï¼‰**

```cpp
class Solution {
public:
    int n;
    vector<int> suffix;
    vector<vector<int>> memo;
    
    int dfs(int i, int M) {
        if (i >= n) return 0;
        if (2*M >= n-i) return suffix[i]; // å¯ä»¥ç›´æ¥æ‹¿å®Œ
        
        if (memo[i][M] != -1) return memo[i][M];
        
        int res = 0;
        for (int X = 1; X <= 2*M; ++X) {
            int next = dfs(i+X, max(M, X));
            res = max(res, suffix[i] - next);
        }
        return memo[i][M] = res;
    }
    
    int stoneGameII(vector<int>& piles) {
        n = piles.size();
        suffix.resize(n+1, 0);
        for (int i = n-1; i >= 0; --i) suffix[i] = piles[i] + suffix[i+1];
        
        memo.assign(n, vector<int>(n+1, -1));
        return dfs(0, 1);
    }
};

è§£é¢˜æ€è·¯ï¼š
dpæ•°ç»„çš„å«ä¹‰ä¸ºä»iå¼€å§‹ä»¥å½“å‰Mçš„æƒ…å†µä¸‹æœ€å¤šè·å¾—çš„çŸ³å­æ•°ã€‚ç”¨æ¥å…¨å±€çš„vectoræ¥è®°å½•é¿å…é‡å¤è¿ç®—ã€‚
é‡‡ç”¨é€’å½’è¿”å›å€¼ï¼Œé€’å½’ä¸­çš„forå¾ªç¯æ˜¯ä¸ºäº†å¯»æ‰¾æœ€ä¼˜è§£ã€‚
