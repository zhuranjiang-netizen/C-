# **maximum-number-of-operations-with-the-same-score-ii**

**ğŸ”— é¢˜ç›®é“¾æ¥ï¼š**  
**[maximum-number-of-operations-with-the-same-score-ii](https://leetcode.cn/problems/maximum-number-of-operations-with-the-same-score-ii/)**

---

## **è§£é¢˜ä»£ç ï¼ˆC++ï¼‰**

```cpp
class Solution {
public:
    int maxOperations(vector<int>& nums) {
        int n = nums.size();
        if (n < 2) return 0;

        int ans = 0;

        // ä¸‰ç§å¯èƒ½çš„ score
        vector<int> scores;
        scores.push_back(nums[0] + nums[1]);
        scores.push_back(nums[n - 2] + nums[n - 1]);
        scores.push_back(nums[0] + nums[n - 1]);

        for (int score : scores) {
            // dp[l][r]ï¼šåŒºé—´ [l, r] å†…æœ€å¤šè¿˜èƒ½åšå¤šå°‘æ¬¡
            vector<vector<int>> dp(n, vector<int>(n, 0));

            // åŒºé—´ DPï¼šæŒ‰é•¿åº¦é€’å¢
            for (int len = 2; len <= n; len++) {
                for (int l = 0; l + len - 1 < n; l++) {
                    int r = l + len - 1;

                    // æƒ…å†µ 1ï¼šå–å·¦ä¸¤ä¸ª
                    if (l + 1 <= r && nums[l] + nums[l + 1] == score) {
                        int val = 1;
                        if (l + 2 <= r) val += dp[l + 2][r];
                        dp[l][r] = max(dp[l][r], val);
                    }

                    // æƒ…å†µ 2ï¼šå–å³ä¸¤ä¸ª
                    if (l <= r - 1 && nums[r - 1] + nums[r] == score) {
                        int val = 1;
                        if (l <= r - 2) val += dp[l][r - 2];
                        dp[l][r] = max(dp[l][r], val);
                    }

                    // æƒ…å†µ 3ï¼šå·¦å³å„å–ä¸€ä¸ª
                    if (l < r && nums[l] + nums[r] == score) {
                        int val = 1;
                        if (l + 1 <= r - 1) val += dp[l + 1][r - 1];
                        dp[l][r] = max(dp[l][r], val);
                    }
                }
            }

            ans = max(ans, dp[0][n - 1]);
        }

        return ans;
    }
};

è§£é¢˜æ€è·¯ï¼š
åˆ†ä¸‰ç±»è®¨è®ºï¼Œå› ä¸ºå¯èƒ½æœ‰ä¸‰ä¸ªåˆ†æ•°ï¼Œè™½ç„¶æœ‰ä¸‰å±‚å¾ªç¯ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦æ˜¯nçš„å¹³æ–¹ï¼Œdpæ•°ç»„çš„å«ä¹‰æ˜¯åœ¨è¿™ä¸ªåŒºé—´å†…çš„æœ€å¤šæ“ä½œæ•°ï¼Œ
å¦å¤–ä¸€å®šè¦æ³¨æ„åˆ¤æ–­l,rä»¥åŠè¾¹ç•Œæ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦åˆ™ä¼šå¯¹dpæ•°ç»„çš„è½¬ç§»é€ æˆé‡å¤§å½±å“ã€‚
