# **maximum-capacity-within-budget**
**ğŸ”— é¢˜ç›®é“¾æ¥ï¼š**  
**[maximum-capacity-within-budget](  https://leetcode.cn/problems/maximum-capacity-within-budget/)**

---

## **è§£é¢˜ä»£ç ï¼ˆC++ï¼‰**

```cpp
class Solution {
public:
    int maxCapacity(vector<int>& costs, vector<int>& capacity, int budget) {

        int n = costs.size();

        // ğŸ‘‰ æŒ‰é¢˜ç›®è¦æ±‚ï¼šä¸­é€”å­˜å‚¨è¾“å…¥
        vector<pair<int,int>> lumarexano;
        for(int i = 0; i < n; i++){
            lumarexano.push_back({costs[i], capacity[i]});
        }

        // æŒ‰ cost ä»å°åˆ°å¤§æ’åº
        sort(lumarexano.begin(), lumarexano.end());

        // prefixMax[i]ï¼šä¸‹æ ‡ â‰¤ i çš„æœ€å¤§ capacity
        vector<int> prefixMax(n);
        prefixMax[0] = lumarexano[0].second;
        for(int i = 1; i < n; i++){
            prefixMax[i] = max(prefixMax[i-1], lumarexano[i].second);
        }

        int ans = 0;

        // æƒ…å†µ 1ï¼šåªé€‰ä¸€å°
        for(int i = 0; i < n; i++){
            if(lumarexano[i].first < budget){
                ans = max(ans, lumarexano[i].second);
            }
        }

        // æƒ…å†µ 2ï¼šé€‰ä¸¤å°
        for(int i = 0; i < n; i++){
            int cost_i = lumarexano[i].first;
            int cap_i  = lumarexano[i].second;

            int remain = budget - cost_i - 1; // ä¸¥æ ¼å°äº budget
            if(remain < 0) continue;

            // åœ¨ [0, i-1] ä¸­æ‰¾ cost <= remain çš„
            int l = 0, r = i - 1, pos = -1;
            while(l <= r){
                int mid = (l + r) / 2;
                if(lumarexano[mid].first <= remain){
                    pos = mid;
                    l = mid + 1;
                } else {
                    r = mid - 1;
                }
            }

            if(pos != -1){
                ans = max(ans, cap_i + prefixMax[pos]);
            }
        }

        return ans;
    }
};

è§£é¢˜æ€è·¯ï¼š
å› ä¸ºé™åˆ¶æ­»äº†ä¸¤å°æ‰€ä»¥è´ªå¿ƒç®—æ³•å°±ä¸ç®¡ç”¨äº†ï¼Œè€Œæ˜¯è¦ç”¨æšä¸¾äº†ã€‚å…ˆæŒ‰ç…§costæ’åºï¼Œè€Œperfixmaxå°±æ˜¯åœ¨åˆ°içš„ä½ç½®ä¸‹é€‰æ‹©ä¸€å°æœ€å¤§å®¹é‡çš„æœºå™¨ã€‚
ç„¶åæŒ‰ç…§é€‰ä¸€å°æœºå™¨å’Œä¸¤å°æœºå™¨è¿›è¡Œåˆ†ç±»è®¨è®ºï¼ŒäºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸ºäº†å¯»æ‰¾åœ¨å‰©ä½™é¢„ç®—ä¸‹çš„æœ€å¤§å®¹é‡ã€‚ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾å‡ºæœ€å¤§ä¸‹æ ‡ posï¼Œä½¿ cost[pos] â‰¤ remain
ç„¶åç”¨ prefixMax[pos] â†’ ç›´æ¥å¾—åˆ°è¯¥åŒºé—´æœ€å¤§å®¹é‡ã€‚
