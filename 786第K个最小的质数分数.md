# **k-th-smallest-prime-fraction**
**ğŸ”— é¢˜ç›®é“¾æ¥ï¼š**  
**[k-th-smallest-prime-fraction](https://leetcode.cn/problems/k-th-smallest-prime-fraction/)**
---

## **è§£é¢˜ä»£ç ï¼ˆC++ï¼‰**

```cpp
class Solution {
public:
    vector<int> kthSmallestPrimeFraction(vector<int>& arr, int k) {
        int n = arr.size();

        double left = 0.0, right = 1.0;
        int p = 0, q = 1;   // æœ€ç»ˆç­”æ¡ˆçš„åˆ†å­ / åˆ†æ¯

        // äºŒåˆ†ç­”æ¡ˆ
        for (int iter = 0; iter < 60; iter++) { // ç²¾åº¦è¶³å¤Ÿ
            double mid = (left + right) / 2.0;

            int count = 0;
            int i = 0;

            // è®°å½• <= mid çš„æœ€å¤§åˆ†æ•°
            int bestP = 0, bestQ = 1;

            // ç±»ä¼¼â€œæ»‘åŠ¨çª—å£â€ï¼šj å‘å³èµ°ï¼Œi åªå¢ä¸å‡
            for (int j = 1; j < n; j++) {
                while (i < j && arr[i] <= mid * arr[j]) {
                    i++;
                }

                // å¯¹å½“å‰ jï¼Œåˆæ³•çš„åˆ†å­ä¸ªæ•°æ˜¯ i ä¸ª
                count += i;

                // å–æœ€å¤§çš„ä¸€å¯¹
                if (i > 0) {
                    // æ¯”è¾ƒ arr[i-1] / arr[j] æ˜¯å¦æ›´å¤§
                    if ((long long)arr[i-1] * bestQ > (long long)bestP * arr[j]) {
                        bestP = arr[i-1];
                        bestQ = arr[j];
                    }
                }
            }

            if (count < k) {
                left = mid;
            } else {
                p = bestP;
                q = bestQ;
                right = mid;
            }
        }

        return {p, q};
    }
};

è§£é¢˜æ€è·¯ï¼š
60æ¬¡forå¾ªç¯æ˜¯å› ä¸ºåˆ†æ•°æ˜¯å°æ•°ï¼Œè¿™æ ·æ˜¯ä¸ºäº†ä¿è¯ç²¾åº¦ï¼Œä¸­é—´ç»Ÿè®¡countæ˜¯é‡‡ç”¨äº†æ»‘åŠ¨çª—å£çš„æ€æƒ³ï¼Œå¦å¤–è¦æ›´æ–°æœ€å¤§åˆ†æ•°çš„åˆ†å­å’Œåˆ†æ¯ï¼Œ
å› ä¸ºæˆ‘ä»¬ä¸€ç›´åœ¨ç¼©å°åŒºé—´ï¼Œæ¯æ¬¡å–å½“æ—¶çš„æœ€å¤§åˆ†æ•°ï¼Œè®°å½•ä¸‹åˆ†å­å’Œåˆ†æ¯ï¼Œæœ€åå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆã€‚
