# **largest-sum-of-averages**
**ğŸ”— é¢˜ç›®é“¾æ¥ï¼š** 
**[largest-sum-of-averages](https://leetcode.cn/problems/largest-sum-of-averages/)**
---

## **è§£é¢˜ä»£ç ï¼ˆC++ï¼‰**

```cpp

class Solution {
public:
    int n;
    vector<double> prefix;          // å‰ç¼€å’Œ
    vector<vector<double>> dp;      // è®°å¿†åŒ–æ•°ç»„
    
    // è®¡ç®—åŒºé—´ [l, r] çš„å¹³å‡å€¼
    double getAvg(int l, int r) {
        return (prefix[r + 1] - prefix[l]) / (r - l + 1);
    }
    
    double dfs(int i, int k) {
        // å¦‚æœå·²ç»è®¡ç®—è¿‡
        if (dp[i][k] >= 0) {
            return dp[i][k];
        }
        
        // å¦‚æœåªå‰© 1 ç»„
        if (k == 1) {
            return dp[i][k] = getAvg(i, n - 1);
        }
        
        double ans = 0.0;
        
        // æšä¸¾ç¬¬ä¸€ç»„çš„ç»“æŸä½ç½®
        for (int j = i; j <= n - k; j++) {
            ans = max(ans, getAvg(i, j) + dfs(j + 1, k - 1));
        }
        
        return dp[i][k] = ans;
    }
    
    double largestSumOfAverages(vector<int>& nums, int K) {
        n = nums.size();
        
        // è®¡ç®—å‰ç¼€å’Œ
        prefix.resize(n + 1);
        prefix[0] = 0;
        for (int i = 0; i < n; i++) {
            prefix[i + 1] = prefix[i] + nums[i];
        }
        
        // åˆå§‹åŒ– dp
        dp.assign(n, vector<double>(K + 1, -1.0));
        
        return dfs(0, K);
    }
};


è§£é¢˜æ€è·¯ï¼š
é‡‡ç”¨è®°å¿†åŒ–æœç´ ï¼Œå‰ç¼€å’Œæ˜¯ç”¨æ¥è®¡ç®—åŒºé—´å¹³å‡å€¼çš„ã€‚dpæ•°ç»„å«ä¹‰ä¸ºä» iå¾€ååˆ†å‰²æˆkæ¬¡åçš„æœ€å¤§å¹³å‡æ•°å’Œã€‚æœ¬è´¨ä¸Šè¿˜æ˜¯åŠ¨æ€è§„åˆ’ã€‚
